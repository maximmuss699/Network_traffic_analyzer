.TH ISA-TOP 1 "November 16, 2024" "Version 1.0" "User Manual ISA-TOP"

.SH NAME
isa-top \- Network Traffic Statistics Monitoring Tool

.SH SYNOPSIS
.B isa-top
.RB \-i interface
.RB \-s " \fBb\fP \| \fBp\fP "
.RB \-t interval
.RB \-d

.SH DESCRIPTION
.B isa-top
is a console-based application designed to monitor real-time network traffic statistics, this tool captures network packets on a specified interface using the
.B libpcap
library and calculates transmission speeds for each active connection. The statistics are dynamically displayed in the terminal using the
.B ncurses
library, providing an organized and user-friendly interface.

.SH CAPTURING PACKETS
.B isa-top
utilizes the
.B libpcap
library to capture network packets in real-time. Upon initialization, the program opens the specified network interface in promiscuous mode to listen for all incoming and outgoing packets. The main packet capturing mechanism operates within a loop that continuously retrieves packets using the
.B pcap_next_ex()
function.

Each captured packet is processed to extract relevant information such as source and destination IP addresses, ports, protocol type (TCP, UDP, ICMP), and the size of the packet. This information is then aggregated to maintain statistics for active connections. The program maintains a list of connections, updating the received and transmitted bytes and packets for each connection based on the direction of the traffic.

.SH CPU USAGE MANAGEMENT
To ensure that the application does not consume excessive CPU resources, especially when there is low or no network traffic, 
.B isa-top
incorporates the
.B sleep_ms()
function within its main loop. When
.B pcap_next_ex()
returns without capturing a packet (indicated by a return value of 0), the program invokes
.B sleep_ms(1)
to pause execution for 1 millisecond. This brief sleep period prevents the application from entering a tight loop that would otherwise lead to high CPU utilization.

By introducing this short delay, 
.B isa-top
balances responsiveness with efficiency, allowing it to remain lightweight and minimally intrusive while continuously monitoring network traffic.

.SH OPTIONS
.TP
\fB\-i\fP \fIinterface\fP
Specifies the network interface to monitor (required). Examples of interfaces include
.B eth0
,
.B en0
, or
.B lo0
.

.TP
\fB\-s\fP \fBb\fP \| \fBp\fP
Determines the sorting mode for displaying connections:
.IP \(bu
\fBb\fP — Sort by the number of transferred bytes (default).
.IP \(bu
\fBp\fP — Sort by the number of transferred packets.

.TP
\fB\-t\fP \fIinterval\fP
Sets the interval for updating statistics in seconds (optional). The default interval is 1 second. Users can define a custom interval using this option to control how frequently the statistics are refreshed.

.TP
\fB\-d\fP
Enables debug mode, which activates detailed logging of the application's operations. Logs are written to
.B isa-top.log
in the current working directory, providing insights into the internal processes and aiding in troubleshooting.

.SH EXAMPLES
.TP
Monitor traffic on the
.B eth0
interface with default settings:
.IP
\fBisa-top \-i eth0\fP

.TP
Monitor traffic on the
.B en0
interface, sort by packets, and set the update interval to 2 seconds:
.IP
\fBisa-top \-i en0 \-s p \-t 2\fP

.SH OUTPUT FORMAT
The output is displayed in a tabular format with the following columns:

.IP
.B Src IP:port
.IP
.B Dst IP:port
.IP
.B Proto
.IP
.B Rx
.IP
.B Tx

Where:
.IP
.B Src IP:port
represents the source IP address and port.
.IP
.B Dst IP:port
represents the destination IP address and port.
.IP
.B Proto
indicates the protocol type (e.g., tcp, udp, icmp).
.IP
.B Rx
shows the received data rate in bytes per second (B/s) and packets per second (P/s).
.IP
.B Tx
shows the transmitted data rate in bytes per second (B/s) and packets per second (P/s).

.SH AUTHOR
Maksim Samusevich (login: xsamus00)

.SH SEE ALSO
.B libpcap(3),
.B ncurses(3),
.B iftop(1)


.SH COPYRIGHT
This is free software; see the source for copying conditions. There is NO warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

.SH FILES
.B isa-top.c
.B isa-top.1
.B README.md
.B Makefile
.B isa-top.log
